<Page
    x:Class="gamelauncher.Views.LibraryPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:conv="clr-namespace:gamelauncher.MVVM"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:gamelauncher.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="LibraryPage"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">

    <Page.Resources>
        <conv:GroupSelectionConverter x:Key="GroupSelectionConverter" />
        <Style x:Key="GroupButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontFamily" Value="pack://application:,,,/fonts/Ubuntu-Medium.ttf #Ubuntu" />
            <Setter Property="FontSize" Value="20" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}">
                            <TextBlock
                                x:Name="textBlock"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Text="{TemplateBinding Content}"
                                TextDecorations="None" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="textBlock" Property="TextDecorations" Value="Underline" />
                            </Trigger>
                            <DataTrigger Binding="{Binding IsSelected}" Value="True">
                                <Setter TargetName="textBlock" Property="TextDecorations" Value="Underline" />
                                <Setter TargetName="textBlock" Property="FontWeight" Value="Bold" />
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <PowerEase
            x:Key="CubicEaseInOut"
            EasingMode="EaseInOut"
            Power="3" />
        <Style x:Key="InvisibleButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderBrush" Value="Transparent" />
            <Setter Property="Cursor" Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


    </Page.Resources>
    <Grid Margin="150,0,0,0" Background="{DynamicResource DarkGrey}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="5*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2.95*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <StackPanel
            Grid.ColumnSpan="2"
            VerticalAlignment="Center"
            Orientation="Vertical">
            <Border
                x:Name="SearchBorder"
                Width="450"
                Height="40"
                Panel.ZIndex="0"
                Background="{DynamicResource TopBarColor}"
                CornerRadius="20">
                <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                    <Image
                        x:Name="Loop"
                        Width="20"
                        Margin="10,0,0,0"
                        Panel.ZIndex="1000"
                        Style="{DynamicResource SearchIMG}">
                        <Image.RenderTransform>
                            <TranslateTransform x:Name="LoopTransform" />
                        </Image.RenderTransform>
                    </Image>
                    <TextBox
                        x:Name="SearchTextBox"
                        Width="400"
                        Margin="8"
                        VerticalContentAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        FontFamily="pack://application:,,,/fonts/Ubuntu-Medium.ttf #Ubuntu"
                        FontSize="16"
                        Foreground="{DynamicResource MainFontColor}"
                        GotFocus="TextBox_GotFocus"
                        LostFocus="TextBox_LostFocus"
                        Tag="{Binding ElementName=SearchBorder}"
                        Text="{Binding SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                        <TextBox.RenderTransform>
                            <TranslateTransform x:Name="LoopTransform1" />
                        </TextBox.RenderTransform>
                    </TextBox>
                </StackPanel>
            </Border>

        </StackPanel>
        <Grid Grid.Row="1" Margin="20,0,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <StackPanel
                Grid.Column="0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Orientation="Horizontal">
                <ItemsControl
                    Margin="0,0,0,0"
                    VerticalAlignment="Center"
                    ItemsSource="{Binding Groups}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Button
                                Margin="8,2"
                                Padding="5,0"
                                Background="Transparent"
                                BorderThickness="0"
                                Command="{Binding DataContext.SelectGroupCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                CommandParameter="{Binding}"
                                Style="{StaticResource InvisibleButtonStyle}">
                                <TextBlock
                                    FontFamily="pack://application:,,,/fonts/Ubuntu-Medium.ttf #Ubuntu"
                                    FontSize="20"
                                    Foreground="{DynamicResource MainFontColor}"
                                    Text="{Binding}">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="TextDecorations" Value="None" />
                                            <Style.Triggers>
                                                <DataTrigger Value="True">
                                                    <DataTrigger.Binding>
                                                        <MultiBinding Converter="{StaticResource GroupSelectionConverter}">
                                                            <Binding Path="DataContext.SelectedGroup" RelativeSource="{RelativeSource AncestorType=ItemsControl}" />
                                                            <Binding />
                                                        </MultiBinding>
                                                    </DataTrigger.Binding>
                                                    <Setter Property="TextDecorations" Value="Underline" />
                                                </DataTrigger>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="TextDecorations" Value="Underline" />
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </Button>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
                <Button
                    Width="20"
                    Margin="8,2"
                    Command="{Binding AddGroupCommand}">
                    <Button.RenderTransform>
                        <ScaleTransform ScaleX="1" ScaleY="1" />
                    </Button.RenderTransform>
                    <Button.Style>
                        <Style BasedOn="{StaticResource InvisibleButtonStyle}" TargetType="Button">
                            <Setter Property="RenderTransformOrigin" Value="0.5 0.5" />
                            <Style.Triggers>
                                <EventTrigger RoutedEvent="MouseEnter">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetProperty="RenderTransform.ScaleX"
                                                To="1.15"
                                                Duration="0:0:0.25" />
                                            <DoubleAnimation
                                                Storyboard.TargetProperty="RenderTransform.ScaleY"
                                                To="1.15"
                                                Duration="0:0:0.25" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                                <EventTrigger RoutedEvent="MouseLeave">
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation
                                                Storyboard.TargetProperty="RenderTransform.ScaleX"
                                                To="1"
                                                Duration="0:0:0.25" />
                                            <DoubleAnimation
                                                Storyboard.TargetProperty="RenderTransform.ScaleY"
                                                To="1"
                                                Duration="0:0:0.25" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                    <Image RenderOptions.BitmapScalingMode="HighQuality" Style="{DynamicResource AddGroupIMG}" />
                </Button>
            </StackPanel>
            <StackPanel
                Grid.Column="1"
                Margin="10,0,10,0"
                VerticalAlignment="Top"
                Orientation="Horizontal">
                <Border
                    Width="28"
                    Height="28"
                    Margin="5,0"
                    CornerRadius="3">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Background" Value="#9319B8" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsList}" Value="True">
                                    <DataTrigger.EnterActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation
                                                    Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                    To="Transparent"
                                                    Duration="0:0:0.3" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </DataTrigger.EnterActions>

                                    <DataTrigger.ExitActions>

                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation
                                                    Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                    To="#9319B8"
                                                    Duration="0:0:0.3" />

                                            </Storyboard>
                                        </BeginStoryboard>
                                    </DataTrigger.ExitActions>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <Button
                        Width="28"
                        Height="28"
                        VerticalAlignment="Top"
                        Command="{Binding CardsCommand}"
                        Style="{StaticResource InvisibleButtonStyle}">
                        <Image
                            Margin="4"
                            RenderOptions.BitmapScalingMode="HighQuality"
                            Source="/img/library.png" />
                    </Button>
                </Border>
                <Border
                    Width="28"
                    Height="28"
                    CornerRadius="3">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Setter Property="Background" Value="Transparent" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsList}" Value="True">

                                    <DataTrigger.EnterActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation
                                                    Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                    To="#9319B8"
                                                    Duration="0:0:0.3" />

                                            </Storyboard>
                                        </BeginStoryboard>
                                    </DataTrigger.EnterActions>

                                    <DataTrigger.ExitActions>
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <ColorAnimation
                                                    Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                    To="Transparent"
                                                    Duration="0:0:0.3" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </DataTrigger.ExitActions>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <Button
                        Width="28"
                        Height="28"
                        VerticalAlignment="Top"
                        Command="{Binding ListCommand}"
                        Style="{StaticResource InvisibleButtonStyle}">
                        <Image
                            Margin="5"
                            RenderOptions.BitmapScalingMode="HighQuality"
                            Source="/img/list.png" />
                    </Button>
                </Border>

            </StackPanel>
        </Grid>

        <ListView
            Grid.Row="1"
            Grid.Column="0"
            Margin="15,35,0,0"
            Background="Transparent"
            BorderThickness="0"
            ItemsSource="{Binding Cards}"
            ScrollViewer.HorizontalScrollBarVisibility="Disabled"
            ScrollViewer.VerticalScrollBarVisibility="Hidden">
            <ListView.Style>
                <Style TargetType="ListView">
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Visibility" Value="Visible" />
                    <Style.Resources>
                        <Style TargetType="ListViewItem">
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="BorderBrush" Value="Transparent" />
                            <Setter Property="Margin" Value="10" />
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListViewItem">
                                        <ContentPresenter />
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Style.Resources>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsSearchEmpty}" Value="True">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsList}" Value="True">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsList}" Value="False">
                            <Setter Property="Visibility" Value="Visible" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ListView.Style>
            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Horizontal" />
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Button
                        x:Name="GameCard"
                        Grid.Row="1"
                        Grid.Column="1"
                        Width="185"
                        Height="280"
                        Margin="0,5,0,0"
                        Command="{Binding GameNavigateCommand}">
                        <Button.RenderTransform>
                            <ScaleTransform x:Name="cardScale" ScaleX="1" ScaleY="1" />
                        </Button.RenderTransform>
                        <Button.Style>
                            <Style BasedOn="{StaticResource InvisibleButtonStyle}" TargetType="Button">
                                <Setter Property="RenderTransformOrigin" Value="0.5 0.5" />
                                <Style.Triggers>
                                    <EventTrigger RoutedEvent="MouseEnter">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation
                                                    EasingFunction="{StaticResource CubicEaseInOut}"
                                                    Storyboard.TargetProperty="RenderTransform.ScaleX"
                                                    To="1.075"
                                                    Duration="0:0:0.25" />
                                                <DoubleAnimation
                                                    EasingFunction="{StaticResource CubicEaseInOut}"
                                                    Storyboard.TargetProperty="RenderTransform.ScaleY"
                                                    To="1.1"
                                                    Duration="0:0:0.25" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                    <EventTrigger RoutedEvent="MouseLeave">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation
                                                    EasingFunction="{StaticResource CubicEaseInOut}"
                                                    Storyboard.TargetProperty="RenderTransform.ScaleX"
                                                    To="1"
                                                    Duration="0:0:0.25" />
                                                <DoubleAnimation
                                                    EasingFunction="{StaticResource CubicEaseInOut}"
                                                    Storyboard.TargetProperty="RenderTransform.ScaleY"
                                                    To="1"
                                                    Duration="0:0:0.25" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                        <Border Background="{DynamicResource TopBarColor}" CornerRadius="12">
                            <StackPanel Orientation="Vertical">
                                <Grid x:Name="imageGrid" Height="225">
                                    <Grid.Style>
                                        <Style TargetType="Grid">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsMouseOver, ElementName=GameCard}" Value="True">
                                                    <DataTrigger.EnterActions>
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation
                                                                    Storyboard.TargetProperty="Height"
                                                                    To="235"
                                                                    Duration="0:0:0.25" />
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </DataTrigger.EnterActions>
                                                    <DataTrigger.ExitActions>
                                                        <BeginStoryboard>
                                                            <Storyboard>
                                                                <DoubleAnimation
                                                                    Storyboard.TargetProperty="Height"
                                                                    To="225"
                                                                    Duration="0:0:0.25" />
                                                            </Storyboard>
                                                        </BeginStoryboard>
                                                    </DataTrigger.ExitActions>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Grid.Style>
                                    <Image RenderOptions.BitmapScalingMode="HighQuality" Stretch="UniformToFill">
                                        <Image.Clip>
                                            <RectangleGeometry
                                                RadiusX="12"
                                                RadiusY="12"
                                                Rect="0,0,185,225" />
                                        </Image.Clip>
                                        <Image.Style>
                                            <Style TargetType="Image">
                                                <Setter Property="Source" Value="{Binding ImagePath}" />
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding IsMouseOver, ElementName=GameCard}" Value="True">
                                                        <DataTrigger.EnterActions>
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <RectAnimation
                                                                        Storyboard.TargetProperty="Clip.Rect"
                                                                        To="0,0,185,235"
                                                                        Duration="0:0:0.25" />

                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </DataTrigger.EnterActions>
                                                        <DataTrigger.ExitActions>
                                                            <BeginStoryboard>
                                                                <Storyboard>
                                                                    <RectAnimation
                                                                        Storyboard.TargetProperty="Clip.Rect"
                                                                        To="0,0,185,225"
                                                                        Duration="0:0:0.25" />
                                                                </Storyboard>
                                                            </BeginStoryboard>
                                                        </DataTrigger.ExitActions>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>
                                </Grid>
                                <Grid Height="50">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock
                                        Margin="10,0"
                                        VerticalAlignment="Center"
                                        FontFamily="pack://application:,,,/fonts/Ubuntu-Bold.ttf #Ubuntu"
                                        FontSize="15"
                                        Foreground="{DynamicResource MainFontColor}"
                                        Text="{Binding Title}"
                                        TextTrimming="CharacterEllipsis" />
                                    <Button
                                        Grid.Column="1"
                                        Width="20"
                                        Margin="10,0"
                                        VerticalAlignment="Center"
                                        Command="{Binding AddToGroupCommand}"
                                        Style="{StaticResource InvisibleButtonStyle}">
                                        <Image RenderOptions.BitmapScalingMode="HighQuality" Style="{DynamicResource AddToGroupIMG}" />
                                    </Button>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </Button>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
        <Grid
            Grid.Row="1"
            Height="20"
            Margin="30,40,25,0"
            VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.3*" />
                <ColumnDefinition Width="0.6*" />
                <ColumnDefinition Width="0.2*" />
                <ColumnDefinition Width="0.2*" />
                <ColumnDefinition Width="0.1*" />
            </Grid.ColumnDefinitions>
            <Grid.Style>
                <Style TargetType="Grid">
                    <Setter Property="Visibility" Value="Collapsed" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsList}" Value="False">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsList}" Value="True">
                            <Setter Property="Visibility" Value="Visible" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Grid.Style>

            <TextBlock
                Grid.Column="0"
                HorizontalAlignment="Center"
                FontFamily="Ubuntu-Bold"
                FontSize="10"
                Foreground="#AAAAAA"
                Text="{DynamicResource Image}" />
            <TextBlock
                Grid.Column="1"
                HorizontalAlignment="Center"
                FontFamily="Ubuntu-Bold"
                FontSize="10"
                Foreground="#AAAAAA"
                Text="{DynamicResource Title}" />
            <TextBlock
                Grid.Column="2"
                HorizontalAlignment="Center"
                FontFamily="Ubuntu-Bold"
                FontSize="10"
                Foreground="#AAAAAA"
                Text="{DynamicResource Release Date}" />
            <TextBlock
                Grid.Column="3"
                HorizontalAlignment="Center"
                FontFamily="Ubuntu-Bold"
                FontSize="10"
                Foreground="#AAAAAA"
                Text="{DynamicResource Size}" />
            <TextBlock
                Grid.Column="4"
                HorizontalAlignment="Center"
                FontFamily="Ubuntu-Bold"
                FontSize="10"
                Foreground="#AAAAAA"
                Text="{DynamicResource Actions}" />
        </Grid>
        <ListView
            Grid.Row="1"
            Grid.Column="0"
            Margin="15,45,0,0"
            Background="Transparent"
            BorderThickness="0"
            ItemsSource="{Binding Cards}"
            ScrollViewer.HorizontalScrollBarVisibility="Disabled"
            ScrollViewer.VerticalScrollBarVisibility="Hidden">

            <ListView.Style>
                <Style TargetType="ListView">
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Visibility" Value="Collapsed" />
                    <Style.Resources>
                        <Style TargetType="ListViewItem">
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="BorderBrush" Value="Transparent" />
                            <Setter Property="Margin" Value="5" />
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListViewItem">
                                        <ContentPresenter />
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Style.Resources>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsSearchEmpty}" Value="True">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsList}" Value="False">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsList}" Value="True">
                            <Setter Property="Visibility" Value="Visible" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ListView.Style>

            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Vertical" />
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>

            <ListView.ItemTemplate>
                <DataTemplate>
                    <Button
                        x:Name="GameCard"
                        Height="80"
                        Margin="10,5"
                        Padding="10"
                        HorizontalContentAlignment="Stretch"
                        Background="{DynamicResource TopBarColor}"
                        BorderThickness="0"
                        Command="{Binding GameNavigateCommand}">
                        <Button.RenderTransform>
                            <ScaleTransform ScaleX="1" ScaleY="1" />
                        </Button.RenderTransform>
                        <Button.Style>
                            <Style BasedOn="{StaticResource InvisibleButtonStyle}" TargetType="Button">
                                <Setter Property="RenderTransformOrigin" Value="0.5 0.5" />

                                <Setter Property="Margin" Value="0,2" />
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" CornerRadius="8">
                                                <Grid Margin="10,0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="0.3*" />
                                                        <ColumnDefinition Width="0.6*" />
                                                        <ColumnDefinition Width="0.2*" />
                                                        <ColumnDefinition Width="0.2*" />
                                                        <ColumnDefinition Width="0.1*" />
                                                    </Grid.ColumnDefinitions>

                                                    <Image
                                                        Grid.Column="0"
                                                        Margin="0,5"
                                                        HorizontalAlignment="Center"
                                                        ClipToBounds="True"
                                                        RenderOptions.BitmapScalingMode="HighQuality"
                                                        Source="{Binding ImageLogoPath}" />

                                                    <TextBlock
                                                        Grid.Column="1"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        FontFamily="pack://application:,,,/fonts/Ubuntu-Bold.ttf #Ubuntu"
                                                        FontSize="18"
                                                        Foreground="{DynamicResource MainFontColor}"
                                                        Text="{Binding Title}"
                                                        TextTrimming="CharacterEllipsis" />

                                                    <TextBlock
                                                        Grid.Column="2"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        FontFamily="pack://application:,,,/fonts/Ubuntu-Bold.ttf #Ubuntu"
                                                        FontSize="16"
                                                        Foreground="{DynamicResource MainFontColor}"
                                                        Text="{Binding Release, StringFormat={}{0:dd.MM.yyyy}}" />

                                                    <TextBlock
                                                        Grid.Column="3"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        FontFamily="pack://application:,,,/fonts/Ubuntu-Bold.ttf #Ubuntu"
                                                        FontSize="16"
                                                        Foreground="{DynamicResource MainFontColor}"
                                                        Text="{Binding Size, StringFormat={}{0:0.0}Gb}" />

                                                    <Button
                                                        Grid.Column="4"
                                                        Width="24"
                                                        Height="24"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Command="{Binding AddToGroupCommand}"
                                                        Style="{StaticResource InvisibleButtonStyle}">
                                                        <Image RenderOptions.BitmapScalingMode="HighQuality" Style="{DynamicResource AddToGroupIMG}" />
                                                    </Button>
                                                </Grid>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <EventTrigger RoutedEvent="MouseEnter">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetProperty="RenderTransform.ScaleX"
                                                    To="1.02"
                                                    Duration="0:0:0.25" />
                                                <DoubleAnimation
                                                    Storyboard.TargetProperty="RenderTransform.ScaleY"
                                                    To="1.02"
                                                    Duration="0:0:0.25" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                    <EventTrigger RoutedEvent="MouseLeave">
                                        <BeginStoryboard>
                                            <Storyboard>
                                                <DoubleAnimation
                                                    Storyboard.TargetProperty="RenderTransform.ScaleX"
                                                    To="1"
                                                    Duration="0:0:0.25" />
                                                <DoubleAnimation
                                                    Storyboard.TargetProperty="RenderTransform.ScaleY"
                                                    To="1"
                                                    Duration="0:0:0.25" />
                                            </Storyboard>
                                        </BeginStoryboard>
                                    </EventTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <TextBlock
            Grid.Row="1"
            Grid.Column="0"
            Margin="15,80,15,0"
            HorizontalAlignment="Center"
            VerticalAlignment="Top"
            FontFamily="pack://application:,,,/fonts/Ubuntu-Medium.ttf #Ubuntu"
            FontSize="20"
            Foreground="#A8A8A8"
            Text="{DynamicResource NothingFound}">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property="Visibility" Value="Collapsed" />
                    <Style.Triggers>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSearchEmpty}" Value="True" />
                                <Condition Binding="{Binding IsNull}" Value="False" />
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Visibility" Value="Visible" />
                        </MultiDataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
        <TextBlock
            Grid.Row="1"
            Grid.Column="0"
            Margin="30,50,30,0"
            HorizontalAlignment="Center"
            VerticalAlignment="Top"
            FontFamily="pack://application:,,,/fonts/Ubuntu-Medium.ttf #Ubuntu"
            FontSize="20"
            Foreground="#A8A8A8"
            Text="{DynamicResource YouDontHaveGames}"
            TextAlignment="Center"
            TextWrapping="Wrap">
            <TextBlock.Style>
                <Style TargetType="TextBlock">
                    <Setter Property="Visibility" Value="Collapsed" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsNull}" Value="True">
                            <Setter Property="Visibility" Value="Visible" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </TextBlock.Style>
        </TextBlock>
        <Grid
            Grid.Row="1"
            Grid.Column="1"
            Margin="0,0,20,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <ScrollViewer
                    Grid.Row="1"
                    Margin="0,15,0,0"
                    HorizontalScrollBarVisibility="Disabled"
                    PanningMode="VerticalOnly"
                    VerticalScrollBarVisibility="Hidden">
                    <ScrollViewer.Resources>
                        <Style x:Key="AnimatedExpander" TargetType="Expander">
                            <Setter Property="FontFamily" Value="pack://application:,,,/fonts/Ubuntu-Medium.ttf #Ubuntu" />
                            <Setter Property="FontSize" Value="16" />

                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Expander">
                                        <Border BorderThickness="0">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="Auto" />
                                                </Grid.RowDefinitions>

                                                <Grid Grid.Row="0">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="Auto" />
                                                    </Grid.ColumnDefinitions>

                                                    <ToggleButton
                                                        x:Name="HeaderSite"
                                                        Grid.ColumnSpan="2"
                                                        HorizontalContentAlignment="Left"
                                                        VerticalContentAlignment="Center"
                                                        Background="Transparent"
                                                        BorderThickness="0"
                                                        Content="{TemplateBinding Header}"
                                                        FontFamily="{TemplateBinding FontFamily}"
                                                        FontSize="16"
                                                        Foreground="{DynamicResource MainFontColor}"
                                                        IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}">
                                                        <ToggleButton.Template>
                                                            <ControlTemplate TargetType="ToggleButton">
                                                                <Border Background="{TemplateBinding Background}" BorderThickness="{TemplateBinding BorderThickness}">
                                                                    <ContentPresenter
                                                                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                                        Content="{TemplateBinding Content}" />
                                                                </Border>
                                                            </ControlTemplate>
                                                        </ToggleButton.Template>
                                                    </ToggleButton>

                                                    <Image
                                                        x:Name="Arrow"
                                                        Grid.Column="1"
                                                        Width="16"
                                                        Height="16"
                                                        Margin="5,0,5,0"
                                                        RenderTransformOrigin="0.5, 0.5"
                                                        Style="{DynamicResource ExpanderIMG}">
                                                        <Image.RenderTransform>
                                                            <RotateTransform Angle="0" />
                                                        </Image.RenderTransform>
                                                    </Image>
                                                </Grid>

                                                <ContentPresenter
                                                    x:Name="ExpandSite"
                                                    Grid.Row="1"
                                                    Margin="10,5,10,10"
                                                    ContentSource="Content"
                                                    Opacity="0"
                                                    RenderTransformOrigin="0.5,0"
                                                    Visibility="Collapsed">
                                                    <ContentPresenter.RenderTransform>
                                                        <ScaleTransform ScaleY="0" />
                                                    </ContentPresenter.RenderTransform>
                                                </ContentPresenter>
                                            </Grid>
                                        </Border>

                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsExpanded" Value="True">
                                                <Setter TargetName="ExpandSite" Property="Visibility" Value="Visible" />
                                                <Trigger.EnterActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetName="ExpandSite"
                                                                Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                                To="1"
                                                                Duration="0:0:0.3" />
                                                            <DoubleAnimation
                                                                Storyboard.TargetName="ExpandSite"
                                                                Storyboard.TargetProperty="Opacity"
                                                                To="1"
                                                                Duration="0:0:0.3" />
                                                            <DoubleAnimation
                                                                Storyboard.TargetName="Arrow"
                                                                Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                                                                To="180"
                                                                Duration="0:0:0.3" />
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.EnterActions>
                                                <Trigger.ExitActions>
                                                    <BeginStoryboard>
                                                        <Storyboard>
                                                            <DoubleAnimation
                                                                Storyboard.TargetName="ExpandSite"
                                                                Storyboard.TargetProperty="Opacity"
                                                                To="0"
                                                                Duration="0:0:0.2" />
                                                            <DoubleAnimation
                                                                Storyboard.TargetName="ExpandSite"
                                                                Storyboard.TargetProperty="(UIElement.RenderTransform).(ScaleTransform.ScaleY)"
                                                                To="0"
                                                                Duration="0:0:0.2" />
                                                            <DoubleAnimation
                                                                Storyboard.TargetName="Arrow"
                                                                Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                                                                To="0"
                                                                Duration="0:0:0.2" />
                                                        </Storyboard>
                                                    </BeginStoryboard>
                                                </Trigger.ExitActions>
                                            </Trigger>
                                            <Trigger Property="IsExpanded" Value="False">
                                                <Setter TargetName="ExpandSite" Property="Visibility" Value="Collapsed" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>

                    </ScrollViewer.Resources>
                    <StackPanel>
                        <StackPanel.Resources>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontFamily" Value="pack://application:,,,/fonts/Ubuntu-Bold.ttf #Ubuntu" />
                                <Setter Property="Foreground" Value="{DynamicResource MainFontColor}" />
                                <Setter Property="FontSize" Value="18" />
                                <Setter Property="TextWrapping" Value="NoWrap" />
                                <Setter Property="TextTrimming" Value="CharacterEllipsis" />
                            </Style>
                            <Style TargetType="Expander">
                                <Setter Property="FontFamily" Value="pack://application:,,,/fonts/Ubuntu-Medium.ttf #Ubuntu" />
                                <Setter Property="Foreground" Value="{DynamicResource MainFontColor}" />
                                <Setter Property="FontSize" Value="14" />
                            </Style>
                            <Style x:Key="line" TargetType="Border">
                                <Setter Property="Height" Value="1" />
                                <Setter Property="Background" Value="#333232" />
                                <Setter Property="Margin" Value="0,15,0,15" />
                            </Style>
                        </StackPanel.Resources>


                        <TextBlock Foreground="{DynamicResource MainFontColor}" Text="{DynamicResource Filters}" />
                        <Border Style="{StaticResource line}" />
                        <Expander
                            Padding="0"
                            Header="{DynamicResource Price}"
                            Style="{StaticResource AnimatedExpander}">
                            <Grid Margin="-10,5,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="0.45*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="0.45*" />
                                </Grid.ColumnDefinitions>
                                <Grid.Resources>
                                    <Style TargetType="TextBox">
                                        <Setter Property="Background" Value="Transparent" />
                                        <Setter Property="BorderThickness" Value="0" />
                                        <Setter Property="VerticalAlignment" Value="Center" />
                                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                                        <Setter Property="Foreground" Value="{DynamicResource MainFontColor}" />
                                    </Style>
                                </Grid.Resources>
                                <TextBlock
                                    Grid.Column="0"
                                    Margin="0,0,4,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    FontSize="14"
                                    Foreground="{DynamicResource MainFontColor}"
                                    Text="Min" />
                                <Border
                                    Grid.Column="1"
                                    Height="35"
                                    Padding="5"
                                    Background="#9319B8"
                                    CornerRadius="10, 0, 0, 10">
                                    <TextBox
                                        PreviewKeyDown="NumberOnlyTextBox_PreviewKeyDown"
                                        PreviewTextInput="NumberOnlyTextBox_PreviewTextInput"
                                        Text="{Binding LowerLimit, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}" />
                                </Border>

                                <Border
                                    Grid.Column="2"
                                    Height="35"
                                    Padding="5"
                                    Background="#A921D2"
                                    CornerRadius="0, 10, 10, 0">
                                    <TextBox
                                        PreviewKeyDown="NumberOnlyTextBox_PreviewKeyDown"
                                        PreviewTextInput="NumberOnlyTextBox_PreviewTextInput"
                                        Text="{Binding UpperLimit, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}" />
                                </Border>
                                <TextBlock
                                    Grid.Column="3"
                                    Margin="4,0,0,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    FontSize="14"
                                    Foreground="{DynamicResource MainFontColor}"
                                    Text="Max" />
                            </Grid>
                        </Expander>
                        <Border Style="{StaticResource line}" />
                        <Expander
                            Foreground="White"
                            Header="{DynamicResource Genre}"
                            Style="{StaticResource AnimatedExpander}">

                            <ListBox
                                Margin="0,5"
                                Background="Transparent"
                                BorderThickness="0"
                                ItemsSource="{Binding AllGenres, Mode=TwoWay}"
                                SelectionMode="Multiple">
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListBoxItem">
                                                    <CheckBox
                                                        VerticalContentAlignment="Center"
                                                        Content="{Binding Name}"
                                                        Cursor="Hand"
                                                        IsChecked="{Binding IsSelected, Mode=TwoWay}">
                                                        <CheckBox.Style>
                                                            <Style TargetType="CheckBox">
                                                                <Setter Property="FontFamily" Value="pack://application:,,,/fonts/Ubuntu-Medium.ttf#Ubuntu" />
                                                                <Setter Property="FontSize" Value="12" />
                                                                <Setter Property="Foreground" Value="{DynamicResource MainFontColor}" />
                                                                <Setter Property="Margin" Value="0,1" />
                                                                <Setter Property="Padding" Value="4,4" />
                                                                <Setter Property="Background" Value="Transparent" />
                                                                <Setter Property="BorderBrush" Value="#4D4D4D" />

                                                                <Setter Property="Template">
                                                                    <Setter.Value>
                                                                        <ControlTemplate TargetType="CheckBox">
                                                                            <Border
                                                                                Padding="{TemplateBinding Padding}"
                                                                                Background="{TemplateBinding Background}"
                                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                                BorderThickness="1"
                                                                                CornerRadius="4">
                                                                                <Grid>
                                                                                    <Grid.ColumnDefinitions>
                                                                                        <ColumnDefinition Width="Auto" />
                                                                                        <ColumnDefinition Width="*" />
                                                                                    </Grid.ColumnDefinitions>

                                                                                    <Border
                                                                                        x:Name="checkMarkBorder"
                                                                                        Grid.Column="0"
                                                                                        Width="18"
                                                                                        Height="18"
                                                                                        Margin="0,0,8,0"
                                                                                        Background="{DynamicResource TopBarColor}"
                                                                                        BorderBrush="#6E6E6E"
                                                                                        BorderThickness="1"
                                                                                        CornerRadius="3">
                                                                                        <Path
                                                                                            x:Name="checkMark"
                                                                                            Width="12"
                                                                                            Height="12"
                                                                                            Data="M0,5 L3,8 L8,0"
                                                                                            Opacity="0"
                                                                                            Stretch="Fill"
                                                                                            Stroke="#FFFFFF"
                                                                                            StrokeThickness="2" />
                                                                                    </Border>

                                                                                    <ContentPresenter
                                                                                        Grid.Column="1"
                                                                                        Margin="2,0,0,0"
                                                                                        VerticalAlignment="Center"
                                                                                        RecognizesAccessKey="True" />
                                                                                </Grid>
                                                                            </Border>


                                                                            <ControlTemplate.Triggers>
                                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                                    <Setter TargetName="checkMarkBorder" Property="BorderBrush" Value="#8E8E8E" />
                                                                                    <Setter TargetName="checkMarkBorder" Property="Background" Value="{DynamicResource TopBarColor}" />
                                                                                </Trigger>

                                                                                <Trigger Property="IsPressed" Value="True">
                                                                                    <Setter TargetName="checkMarkBorder" Property="Background" Value="{DynamicResource TopBarColor}" />
                                                                                </Trigger>

                                                                                <Trigger Property="IsChecked" Value="True">
                                                                                    <Setter TargetName="checkMark" Property="Opacity" Value="1" />
                                                                                    <Setter TargetName="checkMarkBorder" Property="Background" Value="#9319B8" />
                                                                                    <Setter TargetName="checkMarkBorder" Property="BorderBrush" Value="#B729E1" />

                                                                                    <Trigger.EnterActions>
                                                                                        <BeginStoryboard>
                                                                                            <Storyboard>
                                                                                                <DoubleAnimation
                                                                                                    Storyboard.TargetName="checkMark"
                                                                                                    Storyboard.TargetProperty="Opacity"
                                                                                                    From="0"
                                                                                                    To="1"
                                                                                                    Duration="0:0:0.2" />
                                                                                            </Storyboard>
                                                                                        </BeginStoryboard>
                                                                                    </Trigger.EnterActions>

                                                                                    <Trigger.ExitActions>
                                                                                        <BeginStoryboard>
                                                                                            <Storyboard>
                                                                                                <DoubleAnimation
                                                                                                    Storyboard.TargetName="checkMark"
                                                                                                    Storyboard.TargetProperty="Opacity"
                                                                                                    From="1"
                                                                                                    To="0"
                                                                                                    Duration="0:0:0.15" />
                                                                                            </Storyboard>
                                                                                        </BeginStoryboard>
                                                                                    </Trigger.ExitActions>
                                                                                </Trigger>
                                                                            </ControlTemplate.Triggers>
                                                                        </ControlTemplate>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Style>
                                                        </CheckBox.Style>
                                                    </CheckBox>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ListBox.ItemContainerStyle>
                            </ListBox>
                        </Expander>
                        <Border Style="{StaticResource line}" />
                        <Expander
                            Foreground="White"
                            Header="{DynamicResource Platform}"
                            Style="{StaticResource AnimatedExpander}">

                            <ListBox
                                Margin="0,5"
                                Background="Transparent"
                                BorderThickness="0"
                                ItemsSource="{Binding AllPlatforms, Mode=TwoWay}"
                                SelectionMode="Multiple">
                                <ListBox.ItemContainerStyle>
                                    <Style TargetType="ListBoxItem">
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListBoxItem">
                                                    <CheckBox
                                                        VerticalContentAlignment="Center"
                                                        Content="{Binding Name}"
                                                        Cursor="Hand"
                                                        IsChecked="{Binding IsSelected, Mode=TwoWay}">
                                                        <CheckBox.Style>
                                                            <Style TargetType="CheckBox">
                                                                <Setter Property="FontFamily" Value="pack://application:,,,/fonts/Ubuntu-Medium.ttf#Ubuntu" />
                                                                <Setter Property="FontSize" Value="12" />
                                                                <Setter Property="Foreground" Value="{DynamicResource MainFontColor}" />
                                                                <Setter Property="Margin" Value="0,1" />
                                                                <Setter Property="Padding" Value="4,4" />
                                                                <Setter Property="Background" Value="Transparent" />
                                                                <Setter Property="BorderBrush" Value="#4D4D4D" />

                                                                <Setter Property="Template">
                                                                    <Setter.Value>
                                                                        <ControlTemplate TargetType="CheckBox">
                                                                            <Border
                                                                                Padding="{TemplateBinding Padding}"
                                                                                Background="{TemplateBinding Background}"
                                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                                BorderThickness="1"
                                                                                CornerRadius="4">
                                                                                <Grid>
                                                                                    <Grid.ColumnDefinitions>
                                                                                        <ColumnDefinition Width="Auto" />
                                                                                        <ColumnDefinition Width="*" />
                                                                                    </Grid.ColumnDefinitions>

                                                                                    <Border
                                                                                        x:Name="checkMarkBorder"
                                                                                        Grid.Column="0"
                                                                                        Width="18"
                                                                                        Height="18"
                                                                                        Margin="0,0,8,0"
                                                                                        Background="{DynamicResource TopBarColor}"
                                                                                        BorderBrush="#6E6E6E"
                                                                                        BorderThickness="1"
                                                                                        CornerRadius="3">
                                                                                        <Path
                                                                                            x:Name="checkMark"
                                                                                            Width="12"
                                                                                            Height="12"
                                                                                            Data="M0,5 L3,8 L8,0"
                                                                                            Opacity="0"
                                                                                            Stretch="Fill"
                                                                                            Stroke="#FFFFFF"
                                                                                            StrokeThickness="2" />
                                                                                    </Border>

                                                                                    <ContentPresenter
                                                                                        Grid.Column="1"
                                                                                        Margin="2,0,0,0"
                                                                                        VerticalAlignment="Center"
                                                                                        RecognizesAccessKey="True" />
                                                                                </Grid>
                                                                            </Border>


                                                                            <ControlTemplate.Triggers>
                                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                                    <Setter TargetName="checkMarkBorder" Property="BorderBrush" Value="#8E8E8E" />
                                                                                    <Setter TargetName="checkMarkBorder" Property="Background" Value="{DynamicResource TopBarColor}" />
                                                                                </Trigger>

                                                                                <Trigger Property="IsPressed" Value="True">
                                                                                    <Setter TargetName="checkMarkBorder" Property="Background" Value="{DynamicResource TopBarColor}" />
                                                                                </Trigger>

                                                                                <Trigger Property="IsChecked" Value="True">
                                                                                    <Setter TargetName="checkMark" Property="Opacity" Value="1" />
                                                                                    <Setter TargetName="checkMarkBorder" Property="Background" Value="#9319B8" />
                                                                                    <Setter TargetName="checkMarkBorder" Property="BorderBrush" Value="#B729E1" />

                                                                                    <Trigger.EnterActions>
                                                                                        <BeginStoryboard>
                                                                                            <Storyboard>
                                                                                                <DoubleAnimation
                                                                                                    Storyboard.TargetName="checkMark"
                                                                                                    Storyboard.TargetProperty="Opacity"
                                                                                                    From="0"
                                                                                                    To="1"
                                                                                                    Duration="0:0:0.2" />
                                                                                            </Storyboard>
                                                                                        </BeginStoryboard>
                                                                                    </Trigger.EnterActions>

                                                                                    <Trigger.ExitActions>
                                                                                        <BeginStoryboard>
                                                                                            <Storyboard>
                                                                                                <DoubleAnimation
                                                                                                    Storyboard.TargetName="checkMark"
                                                                                                    Storyboard.TargetProperty="Opacity"
                                                                                                    From="1"
                                                                                                    To="0"
                                                                                                    Duration="0:0:0.15" />
                                                                                            </Storyboard>
                                                                                        </BeginStoryboard>
                                                                                    </Trigger.ExitActions>
                                                                                </Trigger>
                                                                            </ControlTemplate.Triggers>
                                                                        </ControlTemplate>
                                                                    </Setter.Value>
                                                                </Setter>
                                                            </Style>
                                                        </CheckBox.Style>
                                                    </CheckBox>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ListBox.ItemContainerStyle>
                            </ListBox>
                        </Expander>
                        <Border Style="{StaticResource line}" />
                        <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                            <StackPanel.Resources>
                                <Style x:Key="MyBorder" TargetType="Border">
                                    <Setter Property="Padding" Value="2" />
                                    <Setter Property="Margin" Value="5" />
                                    <Setter Property="CornerRadius" Value="5" />
                                    <Setter Property="Background" Value="#9319B8" />
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Trigger.EnterActions>
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <ColorAnimation
                                                            Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="#B824E4"
                                                            Duration="0:0:0.2" />

                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </Trigger.EnterActions>

                                            <Trigger.ExitActions>
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <ColorAnimation
                                                            Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="#9319B8"
                                                            Duration="0:0:0.2" />
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </Trigger.ExitActions>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                                <Style x:Key="MyButton" TargetType="Button">
                                    <Setter Property="OverridesDefaultStyle" Value="True" />
                                    <Setter Property="Background" Value="Transparent" />
                                    <Setter Property="Foreground" Value="White" />
                                    <Setter Property="BorderThickness" Value="0" />
                                    <Setter Property="Cursor" Value="Hand" />
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Padding="5" Background="{TemplateBinding Background}">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </StackPanel.Resources>
                            <Border
                                Padding="3"
                                HorizontalAlignment="Center"
                                Style="{StaticResource MyBorder}">
                                <Button
                                    Command="{Binding ResetCommand}"
                                    Content="{DynamicResource Reset}"
                                    FontFamily="pack://application:,,,/fonts/Ubuntu-Medium.ttf#Ubuntu"
                                    Style="{StaticResource MyButton}" />
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Grid>
    </Grid>

</Page>
